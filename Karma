-- ‚ñà‚ñÄ‚ñÄ ‚ñà‚ñÄ‚ñÄ‚ñà ‚ñà‚ñÄ‚ñÄ‚ñÑ ‚ñà‚ñÄ‚ñÄ ‚ñÄ‚ñÄ‚ñà‚ñÄ‚ñÄ ‚ñà‚ñÄ‚ñÄ ‚ñà‚ñÄ‚ñÄ‚ñà ‚ñà‚ñÄ‚ñÄ‚ñÑ 
-- ‚ñà‚ñë‚ñë ‚ñà‚ñÑ‚ñÑ‚ñà ‚ñà‚ñÄ‚ñÄ‚ñÑ ‚ñà‚ñÄ‚ñÄ ‚ñë‚ñë‚ñà‚ñë‚ñë ‚ñà‚ñÄ‚ñÄ ‚ñà‚ñÑ‚ñÑ‚ñà ‚ñà‚ñÄ‚ñÄ‚ñÑ 
-- ‚ñÄ‚ñÄ‚ñÄ ‚ñÄ‚ñë‚ñë‚ñÄ ‚ñÄ‚ñÄ‚ñÄ‚ñë ‚ñÄ‚ñÄ‚ñÄ ‚ñë‚ñë‚ñÄ‚ñë‚ñë ‚ñÄ‚ñÄ‚ñÄ ‚ñÄ‚ñë‚ñë‚ñÄ ‚ñÄ‚ñÄ‚ñÄ‚ñë 
-- –î–û–†–ê–ë–û–¢–ê–ù–ù–´–ô ESP + –¢–†–ï–ô–°–ï–†–´ + –§–ò–ö–° –ü–û–õ–ï–¢–ê + –¢–ê–ô–ú–ï–†–´

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")

local Window = Rayfield:CreateWindow({
    Name = "üî• MM2 ULTIMATE v6.0",
    LoadingTitle = "–ó–∞–≥—Ä—É–∑–∫–∞ —É–ª—É—á—à–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π...",
    LoadingSubtitle = "ESP, —Ç—Ä–µ–π—Å–µ—Ä—ã, —Ç–∞–π–º–µ—Ä—ã –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è",
    ConfigurationSaving = { Enabled = true },
    KeySystem = false
})

-- üéØ –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –ù–û–í–´–• –§–£–ù–ö–¶–ò–ô
local CheatConfig = {
    ESP = {
        Enabled = false,
        Tracers = false,
        Colors = {
            Murderer = Color3.new(1, 0, 0),    -- –ö—Ä–∞—Å–Ω—ã–π
            Sheriff = Color3.new(0, 0, 1),     -- –°–∏–Ω–∏–π
            Innocent = Color3.new(0, 1, 0)     -- –ó–µ–ª–µ–Ω—ã–π
        }
    },
    Fly = {
        Enabled = false,
        Speed = 50
    },
    Timers = {
        RoundStart = 0,
        AFKStart = 0,
        AFKTime = 0
    }
}

local ESPObjects = {}
local TracerObjects = {}

-- üëÅÔ∏è –î–û–†–ê–ë–û–¢–ê–ù–ù–´–ô ESP –° –¶–í–ï–¢–ê–ú–ò –ü–û –†–û–õ–Ø–ú
local function GetPlayerRole(player)
    if player.Character then
        -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –Ω–∞ –Ω–æ–∂
        for _, tool in ipairs(player.Backpack:GetChildren()) do
            if tool:IsA("Tool") then
                if string.lower(tool.Name):find("knife") then
                    return "Murderer"
                elseif string.lower(tool.Name):find("gun") then
                    return "Sheriff"
                end
            end
        end
        
        -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤ —Ä—É–∫–∞—Ö
        for _, tool in ipairs(player.Character:GetChildren()) do
            if tool:IsA("Tool") then
                if string.lower(tool.Name):find("knife") then
                    return "Murderer"
                elseif string.lower(tool.Name):find("gun") then
                    return "Sheriff"
                end
            end
        end
    end
    return "Innocent"
end

local function CreateESP(player)
    if player == LocalPlayer then return end
    if ESPObjects[player] then return end
    
    local highlight = Instance.new("Highlight")
    highlight.Name = player.Name .. "_ESP"
    highlight.Adornee = player.Character
    highlight.FillTransparency = 0.7
    highlight.OutlineTransparency = 0.3
    highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    
    local billboard = Instance.new("BillboardGui")
    billboard.Name = player.Name .. "_Info"
    billboard.Size = UDim2.new(0, 200, 0, 60)
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    billboard.Adornee = player.Character:WaitForChild("Head")
    billboard.AlwaysOnTop = true
    
    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = player.Name
    textLabel.TextColor3 = Color3.new(1, 1, 1)
    textLabel.TextSize = 14
    textLabel.Font = Enum.Font.GothamBold
    textLabel.TextStrokeTransparency = 0.3
    textLabel.Parent = billboard
    
    billboard.Parent = player.Character.Head
    highlight.Parent = player.Character
    
    ESPObjects[player] = {
        Highlight = highlight,
        Billboard = billboard,
        TextLabel = textLabel
    }
    
    return ESPObjects[player]
end

local function UpdateESP()
    for player, espData in pairs(ESPObjects) do
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local role = GetPlayerRole(player)
            local color = CheatConfig.ESP.Colors[role]
            
            -- –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç
            espData.Highlight.FillColor = color
            espData.Highlight.OutlineColor = color
            espData.TextLabel.TextColor3 = color
            
            -- –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç
            local distance = math.floor((LocalPlayer.Character.HumanoidRootPart.Position - 
                                       player.Character.HumanoidRootPart.Position).Magnitude)
            espData.TextLabel.Text = player.Name .. " - " .. role .. " (" .. distance .. ")"
            
            -- –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å
            espData.Highlight.Enabled = CheatConfig.ESP.Enabled
            espData.Billboard.Enabled = CheatConfig.ESP.Enabled
        else
            -- –£–¥–∞–ª—è–µ–º –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ —É–º–µ—Ä
            if espData.Highlight then espData.Highlight:Destroy() end
            if espData.Billboard then espData.Billboard:Destroy() end
            ESPObjects[player] = nil
        end
    end
end

-- üìè –°–ò–°–¢–ï–ú–ê –¢–†–ï–ô–°–ï–†–û–í (–ª–∏–Ω–∏–∏ –∫ –∏–≥—Ä–æ–∫–∞–º)
local function CreateTracer(player)
    if player == LocalPlayer then return end
    if TracerObjects[player] then return end
    
    local tracer = Instance.new("Part")
    tracer.Name = player.Name .. "_Tracer"
    tracer.Anchored = true
    tracer.CanCollide = false
    tracer.Material = Enum.Material.Neon
    tracer.Size = Vector3.new(0.1, 0.1, 0.1)
    tracer.Transparency = 0.7
    
    TracerObjects[player] = tracer
    return tracer
end

local function UpdateTracers()
    for player, tracer in pairs(TracerObjects) do
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local role = GetPlayerRole(player)
            local color = CheatConfig.ESP.Colors[role]
            
            -- –ü–æ–∑–∏—Ü–∏—è —Ç—Ä–µ–π—Å–µ—Ä–∞ (–ª–∏–Ω–∏—è –æ—Ç –∫–∞–º–µ—Ä—ã –∫ –∏–≥—Ä–æ–∫—É)
            local camera = Workspace.CurrentCamera
            local playerPos = player.Character.HumanoidRootPart.Position
            local cameraPos = camera.CFrame.Position
            
            -- –°–æ–∑–¥–∞–µ–º –ª—É—á –æ—Ç –∫–∞–º–µ—Ä—ã –∫ –∏–≥—Ä–æ–∫—É
            tracer.BrickColor = BrickColor.new(color)
            tracer.Size = Vector3.new(0.1, 0.1, (playerPos - cameraPos).Magnitude)
            tracer.CFrame = CFrame.lookAt(cameraPos, playerPos) * 
                           CFrame.new(0, 0, -tracer.Size.Z/2)
            tracer.Parent = Workspace
            tracer.Transparency = CheatConfig.ESP.Tracers and 0.3 or 1
        else
            if tracer then tracer:Destroy() end
            TracerObjects[player] = nil
        end
    end
end

-- üïäÔ∏è –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ü–û–õ–ï–¢
local FlyConnection
local function ToggleFly()
    if CheatConfig.Fly.Enabled then
        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.Name = "FlyVelocity"
        bodyVelocity.MaxForce = Vector3.new(40000, 40000, 40000)
        bodyVelocity.Velocity = Vector3.new(0, 0, 0)
        bodyVelocity.Parent = LocalPlayer.Character.HumanoidRootPart
        
        FlyConnection = RunService.Heartbeat:Connect(function()
            if not CheatConfig.Fly.Enabled or not LocalPlayer.Character then
                bodyVelocity:Destroy()
                FlyConnection:Disconnect()
                return
            end
            
            local camera = Workspace.CurrentCamera
            local root = LocalPlayer.Character.HumanoidRootPart
            
            local direction = Vector3.new(0, 0, 0)
            
            -- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WASD
            if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.W) then
                direction = direction + camera.CFrame.LookVector
            end
            if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.S) then
                direction = direction - camera.CFrame.LookVector
            end
            if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.A) then
                direction = direction - camera.CFrame.RightVector
            end
            if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.D) then
                direction = direction + camera.CFrame.RightVector
            end
            if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.Space) then
                direction = direction + Vector3.new(0, 1, 0)
            end
            if game:GetService("UserInputService"):IsKeyDown(Enum.KeyCode.LeftShift) then
                direction = direction + Vector3.new(0, -1, 0)
            end
            
            bodyVelocity.Velocity = direction * CheatConfig.Fly.Speed
        end)
    else
        if FlyConnection then
            FlyConnection:Disconnect()
        end
        local velocity = LocalPlayer.Character.HumanoidRootPart:FindFirstChild("FlyVelocity")
        if velocity then
            velocity:Destroy()
        end
    end
end

-- ‚è∞ –°–ò–°–¢–ï–ú–ê –¢–ê–ô–ú–ï–†–û–í
local function StartRoundTimer()
    CheatConfig.Timers.RoundStart = tick()
end

local function GetRoundTime()
    return math.floor(tick() - CheatConfig.Timers.RoundStart)
end

local function FormatTime(seconds)
    local minutes = math.floor(seconds / 60)
    local secs = seconds % 60
    return string.format("%02d:%02d", minutes, secs)
end

-- üéÆ –ê–ù–¢–ò-–ê–§–ö –° –£–í–ï–î–û–ú–õ–ï–ù–ò–ï–ú
local LastPosition = nil
local AFKStartTime = 0

local function CheckAFK()
    local currentPos = LocalPlayer.Character and 
                      LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and
                      LocalPlayer.Character.HumanoidRootPart.Position
    
    if currentPos then
        if LastPosition and (currentPos - LastPosition).Magnitude < 1 then
            -- –ò–≥—Ä–æ–∫ –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è
            if AFKStartTime == 0 then
                AFKStartTime = tick()
            else
                local afkTime = math.floor(tick() - AFKStartTime)
                if afkTime > 10 and afkTime % 10 == 0 then
                    Rayfield:Notify({
                        Title = "‚è∞ –í–ù–ò–ú–ê–ù–ò–ï: –í–´ –í –ê–§–ö",
                        Content = "–°—Ç–æ–∏—Ç–µ –Ω–∞ –º–µ—Å—Ç–µ: " .. FormatTime(afkTime),
                        Duration = 5
                    })
                end
            end
        else
            AFKStartTime = 0
        end
        LastPosition = currentPos
    end
end

-- üéÆ –ì–õ–ê–í–ù–ê–Ø –í–ö–õ–ê–î–ö–ê
local MainTab = Window:CreateTab("üî• –ì–ª–∞–≤–Ω–∞—è", 4483362458)

-- üëÅÔ∏è –°–ï–ö–¶–ò–Ø ESP
local ESPSection = MainTab:CreateSection("üëÅÔ∏è –£–ª—É—á—à–µ–Ω–Ω—ã–π ESP")

MainTab:CreateToggle({
    Name = "üéØ –í–∫–ª—é—á–∏—Ç—å ESP (—Ü–≤–µ—Ç–∞ –ø–æ —Ä–æ–ª—è–º)",
    CurrentValue = false,
    Callback = function(Value)
        CheatConfig.ESP.Enabled = Value
        if not Value then
            -- –û—á–∏—â–∞–µ–º ESP –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏
            for player, espData in pairs(ESPObjects) do
                if espData.Highlight then espData.Highlight:Destroy() end
                if espData.Billboard then espData.Billboard:Destroy() end
            end
            ESPObjects = {}
        end
    end
})

MainTab:CreateToggle({
    Name = "üìè –¢—Ä–µ–π—Å–µ—Ä—ã –∫ –∏–≥—Ä–æ–∫–∞–º",
    CurrentValue = false,
    Callback = function(Value)
        CheatConfig.ESP.Tracers = Value
        if not Value then
            -- –û—á–∏—â–∞–µ–º —Ç—Ä–µ–π—Å–µ—Ä—ã
            for player, tracer in pairs(TracerObjects) do
                if tracer then tracer:Destroy() end
            end
            TracerObjects = {}
        end
    end
})

-- üöÄ –°–ï–ö–¶–ò–Ø –ü–ï–†–ï–ú–ï–©–ï–ù–ò–Ø
local MoveSection = MainTab:CreateSection("üöÄ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ–ª–µ—Ç")

MainTab:CreateToggle({
    Name = "üïäÔ∏è –í–∫–ª—é—á–∏—Ç—å –ø–æ–ª–µ—Ç (WASD + Space/Shift)",
    CurrentValue = false,
    Callback = function(Value)
        CheatConfig.Fly.Enabled = Value
        ToggleFly()
    end
})

MainTab:CreateSlider({
    Name = "üí® –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–ª–µ—Ç–∞",
    Range = {10, 100},
    Increment = 5,
    Suffix = "speed",
    CurrentValue = 50,
    Callback = function(Value)
        CheatConfig.Fly.Speed = Value
    end
})

-- ‚è∞ –°–ï–ö–¶–ò–Ø –¢–ê–ô–ú–ï–†–û–í
local TimerSection = MainTab:CreateSection("‚è∞ –¢–∞–π–º–µ—Ä—ã –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥")

local RoundTimeLabel = MainTab:CreateLabel("–í—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞: 00:00")
local AFKTimeLabel = MainTab:CreateLabel("–ê–§–ö –≤—Ä–µ–º—è: 00:00")

MainTab:CreateButton({
    Name = "üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–π–º–µ—Ä —Ä–∞—É–Ω–¥–∞",
    Callback = function()
        StartRoundTimer()
        Rayfield:Notify({
            Title = "‚è∞ –¢–∞–π–º–µ—Ä —Ä–∞—É–Ω–¥–∞ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω",
            Duration = 3
        })
    end
})

-- üîß –£–¢–ò–õ–ò–¢–´
local UtilSection = MainTab:CreateSection("üîß –£—Ç–∏–ª–∏—Ç—ã")

MainTab:CreateButton({
    Name = "üî´ –í–∑—è—Ç—å –ø—É—à–∫—É",
    Callback = function()
        local gun = Workspace:FindFirstChild("GunDrop")
        if gun then
            LocalPlayer.Character.HumanoidRootPart.CFrame = gun.CFrame
        end
    end
})

MainTab:CreateButton({
    Name = "üíÄ Kill All",
    Callback = function()
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character then
                LocalPlayer.Character.HumanoidRootPart.CFrame = 
                    player.Character.HumanoidRootPart.CFrame
                wait(0.2)
            end
        end
    end
})

-- üîÑ –û–°–ù–û–í–ù–û–ô –¶–ò–ö–õ –û–ë–ù–û–í–õ–ï–ù–ò–Ø
RunService.Heartbeat:Connect(function()
    -- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ESP
    if CheatConfig.ESP.Enabled then
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character then
                if not ESPObjects[player] then
                    CreateESP(player)
                end
            end
        end
        UpdateESP()
    end
    
    -- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–π—Å–µ—Ä–æ–≤
    if CheatConfig.ESP.Tracers then
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character then
                if not TracerObjects[player] then
                    CreateTracer(player)
                end
            end
        end
        UpdateTracers()
    end
    
    -- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–æ–≤
    RoundTimeLabel:Set("–í—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞: " .. FormatTime(GetRoundTime()))
    
    -- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ê–§–ö
    CheckAFK()
    if AFKStartTime > 0 then
        local afkTime = math.floor(tick() - AFKStartTime)
        AFKTimeLabel:Set("–ê–§–ö –≤—Ä–µ–º—è: " .. FormatTime(afkTime))
    else
        AFKTimeLabel:Set("–ê–§–ö –≤—Ä–µ–º—è: 00:00")
    end
end)

-- üéØ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –°–¢–ê–†–¢ –¢–ê–ô–ú–ï–†–ê –ü–†–ò –¢–ï–õ–ï–ü–û–†–¢–ï
LocalPlayer.CharacterAdded:Connect(function()
    wait(2) -- –ñ–¥–µ–º –ø–æ—è–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    StartRoundTimer()
    Rayfield:Notify({
        Title = "üéÆ –ù–∞—á–∞–ª–æ —Ä–∞—É–Ω–¥–∞!",
        Content = "–¢–∞–π–º–µ—Ä –∑–∞–ø—É—â–µ–Ω",
        Duration = 3
    })
end)

-- ‚è∞ –ê–ù–¢–ò-–ê–§–ö –°–ò–°–¢–ï–ú–ê
local VirtualUser = game:GetService("VirtualUser")
game:GetService("Players").LocalPlayer.Idled:connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)

-- üéâ –£–í–ï–î–û–ú–õ–ï–ù–ò–ï –û –ó–ê–ì–†–£–ó–ö–ï
Rayfield:Notify({
    Title = "üî• MM2 ULTIMATE v6.0 –ó–ê–ì–†–£–ñ–ï–ù!",
    Content = "–î–æ—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π ESP + —Ç—Ä–µ–π—Å–µ—Ä—ã + –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ–ª–µ—Ç + —Ç–∞–π–º–µ—Ä—ã!",
    Duration = 6,
})

-- üöÄ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –°–¢–ê–†–¢
StartRoundTimer()

print([[
    
üî• MM2 ULTIMATE v6.0 –ê–ö–¢–ò–í–ò–†–û–í–ê–ù!
‚úÖ ESP —Å —Ü–≤–µ—Ç–∞–º–∏ –ø–æ —Ä–æ–ª—è–º
‚úÖ –†–∞–±–æ—á–∏–µ —Ç—Ä–µ–π—Å–µ—Ä—ã  
‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø–æ–ª–µ—Ç
‚úÖ –¢–∞–π–º–µ—Ä —Ä–∞—É–Ω–¥–∞ –∏ –ê–§–ö
‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–æ—Ç–æ–≤—ã!

]])
