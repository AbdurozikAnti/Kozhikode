-- Murder Mystery 2 Extended Cheat v2.0
-- –§—É–Ω–∫—Ü–∏–∏: ESP, —Ç—Ä–µ–π—Å–µ—Ä—ã, kill all, kill sheriff, –∞–≤—Ço—Ñ–∞—Ä–º, —Ñ–ª–∏–Ω–≥, —Ç–∞–π–º–µ—Ä —Ä–∞—É–Ω–¥–∞

local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
    Name = "üé≠ MM2 Extended Cheat v2.0",
    LoadingTitle = "–ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞...",
    ConfigurationSaving = { Enabled = true, FolderName = "MM2Extended", FileName = "Config" },
    KeySystem = false
})

local ESPEnabled = false
local FlyEnabled = false
local AimbotEnabled = false
local KillAllEnabled = false
local KillSheriffEnabled = false
local AutoFarmEnabled = false
local FlySpeed = 50

local ESPObjects = {}

-- UI –¥–ª—è —Ç–∞–π–º–µ—Ä–∞ —Ä–∞—É–Ω–¥–∞
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "RoundTimerGui"
local TimerLabel = Instance.new("TextLabel", ScreenGui)
TimerLabel.Size = UDim2.new(0, 200, 0, 40)
TimerLabel.Position = UDim2.new(0.5, -100, 0, 10)
TimerLabel.BackgroundTransparency = 0.4
TimerLabel.BackgroundColor3 = Color3.new(0, 0, 0)
TimerLabel.TextColor3 = Color3.new(1, 1, 1)
TimerLabel.TextScaled = true
TimerLabel.Font = Enum.Font.GothamBold
TimerLabel.Text = "–†–∞—É–Ω–¥ –Ω–∞—á–Ω–µ—Ç—Å—è..."

-- –°–æ–∑–¥–∞–µ–º ESP —Å —á–µ—Ç–∫–∏–º –∫–æ–Ω—Ç—É—Ä–æ–º –∏ —Ç—Ä–µ–π—Å–µ—Ä–æ–º
local function CreateESP(player)
    if ESPObjects[player] then return end
    local character = player.Character
    if not character then return end
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return end

    local highlight = Instance.new("Highlight")
    highlight.Name = "ESPHighlight_" .. player.Name
    highlight.Adornee = character
    highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
    highlight.FillTransparency = 0.7
    highlight.OutlineTransparency = 0
    highlight.FillColor = Color3.new(0,1,0)
    highlight.Parent = character

    local tracerPart = Instance.new("Part")
    tracerPart.Name = "ESPTracer_" .. player.Name
    tracerPart.Anchored = true
    tracerPart.CanCollide = false
    tracerPart.Size = Vector3.new(0.1, 0.1, 0.1)
    tracerPart.Transparency = 1
    tracerPart.Material = Enum.Material.Neon
    tracerPart.Parent = Workspace

    local attachment0 = Instance.new("Attachment", tracerPart)
    local attachment1 = Instance.new("Attachment", rootPart)

    local beam = Instance.new("Beam")
    beam.Attachment0 = attachment0
    beam.Attachment1 = attachment1
    beam.Width0 = 0.1
    beam.Width1 = 0.1
    beam.Color = ColorSequence.new(Color3.new(1,1,1))
    beam.Transparency = NumberSequence.new(0.5)
    beam.FaceCamera = true
    beam.Parent = tracerPart

    -- Billboard —Å –∏–º–µ–Ω–µ–º –∏ —Ä–æ–ª—å—é
    local billboard = Instance.new("BillboardGui")
    billboard.Adornee = character:FindFirstChild("Head")
    billboard.Size = UDim2.new(0, 150, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 3.5, 0)
    billboard.AlwaysOnTop = true
    billboard.Parent = character.Head

    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(1,0,0.5,0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.TextColor3 = Color3.new(1,1,1)
    nameLabel.TextStrokeTransparency = 0
    nameLabel.Text = player.Name
    nameLabel.Font = Enum.Font.GothamBold
    nameLabel.TextSize = 14
    nameLabel.Parent = billboard

    local roleLabel = Instance.new("TextLabel")
    roleLabel.Size = UDim2.new(1,0,0.5,0)
    roleLabel.Position = UDim2.new(0,0,0.5,0)
    roleLabel.BackgroundTransparency = 1
    roleLabel.TextColor3 = Color3.new(0,1,0)
    roleLabel.TextStrokeTransparency = 0
    roleLabel.Text = "–ù–µ–≤–∏–Ω–Ω—ã–π"
    roleLabel.Font = Enum.Font.Gotham
    roleLabel.TextSize = 12
    roleLabel.Parent = billboard

    ESPObjects[player] = {
        Highlight = highlight,
        TracerPart = tracerPart,
        Attachment0 = attachment0,
        Attachment1 = attachment1,
        Beam = beam,
        Billboard = billboard,
        NameLabel = nameLabel,
        RoleLabel = roleLabel
    }
end

local function RemoveESP(player)
    local esp = ESPObjects[player]
    if esp then
        for _, v in pairs(esp) do
            if v and v.Parent then
                v:Destroy()
            end
        end
        ESPObjects[player] = nil
    end
end

local function UpdateESP()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            local character = player.Character
            if character and character:FindFirstChild("Humanoid") and character.Humanoid.Health > 0 then
                if ESPEnabled then
                    if not ESPObjects[player] then
                        CreateESP(player)
                    end
                    local esp = ESPObjects[player]
                    -- –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–æ–ª—å
                    local role = "–ù–µ–≤–∏–Ω–Ω—ã–π"
                    local color = Color3.new(0,1,0)
                    for _, container in ipairs({player.Backpack, character}) do
                        if container then
                            for _, tool in pairs(container:GetChildren()) do
                                if tool:IsA("Tool") then
                                    local tname = string.lower(tool.Name)
                                    if tname:find("knife") or tname:find("–Ω–æ–∂") then
                                        role = "–£–±–∏–π—Ü–∞"
                                        color = Color3.new(1,0,0)
                                    elseif tname:find("gun") or tname:find("–ø—É—à–∫–∞") then
                                        role = "–®–µ—Ä–∏—Ñ"
                                        color = Color3.new(0,0,1)
                                    end
                                end
                            end
                        end
                    end
                    esp.RoleLabel.Text = role
                    esp.RoleLabel.TextColor3 = color
                    esp.Highlight.FillColor = color
                    esp.Beam.Color = ColorSequence.new(color)
                    esp.TracerPart.BrickColor = BrickColor.new(color)

                    -- –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é —Ç—Ä–µ–π—Å–µ—Ä–æ–≤
                    local localRoot = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                    if esp.TracerPart and esp.Attachment0 and esp.Attachment1 and localRoot then
                        esp.TracerPart.Position = localRoot.Position + Vector3.new(0, -3, 0)
                        esp.Attachment0.Position = Vector3.new(0,0,0)
                        esp.Attachment1.WorldPosition = character.HumanoidRootPart.Position
                    end
                else
                    RemoveESP(player)
                end
            else
                RemoveESP(player)
            end
        end
    end
end

-- Kill —Ñ—É–Ω–∫—Ü–∏–∏
local function KillPlayer(target)
    if not target or not target.Character then return end
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return end
    if target == LocalPlayer then return end
    local root = target.Character:FindFirstChild("HumanoidRootPart")
    if root then
        LocalPlayer.Character.HumanoidRootPart.CFrame = root.CFrame
        -- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å "–∫–∏–ª–ª"
        wait(0.2)
    end
end

local function KillAll()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            KillPlayer(player)
        end
    end
end

local function KillSheriff()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            local role = "–ù–µ–≤–∏–Ω–Ω—ã–π"
            for _, container in ipairs({player.Backpack, player.Character}) do
                if container then
                    for _, tool in pairs(container:GetChildren()) do
                        if tool:IsA("Tool") then
                            local tname = string.lower(tool.Name)
                            if tname:find("gun") or tname:find("–ø—É—à–∫–∞") then
                                role = "–®–µ—Ä–∏—Ñ"
                            end
                        end
                    end
                end
            end
            if role == "–®–µ—Ä–∏—Ñ" then
                KillPlayer(player)
            end
        end
    end
end

-- –ê–≤—Ç–æ—Ñ–∞—Ä–º —à–∞—Ä–æ–≤ –∏ –º–æ–Ω–µ—Ç
local function AutoFarm()
    if not AutoFarmEnabled then return end
    for _, orb in pairs(Workspace:GetChildren()) do
        if orb.Name == "Coin" or orb.Name == "Orb" or orb.Name == "Diamond" then
            if orb:IsA("BasePart") then
                if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    LocalPlayer.Character.HumanoidRootPart.CFrame = orb.CFrame
                    wait(0.1)
                end
            end
        end
    end
end

-- –§–ª–∏–Ω–≥ –∏–≥—Ä–æ–∫–∞
local FlungPlayer = nil

local function FlingPlayer(target)
    if not target or not target.Character then return end
    local root = target.Character:FindFirstChild("HumanoidRootPart")
    if not root then return end
    if not LocalPlayer.Character then return end
    
    local torso = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not torso then return end
    
    for i=1, 50 do
        torso.CFrame = root.CFrame + Vector3.new(math.random(-10,10), 5, math.random(-10,10))
        wait(0.05)
    end
end

-- –¢–∞–π–º–µ—Ä —Ä–∞—É–Ω–¥–∞ (3 –º–∏–Ω—É—Ç—ã)
local RoundTime = 180
local RoundTimerStart = 0
local RoundActive = false

local function StartRoundTimer()
    RoundTimerStart = os.time()
    RoundActive = true
    coroutine.wrap(function()
        while RoundActive do
            local elapsed = os.time() - RoundTimerStart
            local remaining = RoundTime - elapsed
            if remaining <= 0 then
                TimerLabel.Text = "–†–∞—É–Ω–¥ –æ–∫–æ–Ω—á–µ–Ω. –ù–æ–≤—ã–π —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥..."
                wait(5)
                RoundTimerStart = os.time()
                remaining = RoundTime
            else
                TimerLabel.Text = string.format("–†–∞—É–Ω–¥: %02d:%02d", math.floor(remaining / 60), remaining % 60)
            end
            wait(1)
        end
    end)()
end

-- GUI Setup
local MainTab = Window:CreateTab("–ì–ª–∞–≤–Ω–∞—è", 4483362458)

local InfoSection = MainTab:CreateSection("–§—É–Ω–∫—Ü–∏–∏ —á–∏—Ç–µ—Ä–∞")

MainTab:CreateToggle({
    Name = "ESP —Å —Ç—Ä–µ–π—Å–µ—Ä–∞–º–∏",
    CurrentValue = false,
    Callback = function(value)
        ESPEnabled = value
        if not value then
            for _, p in pairs(Players:GetPlayers()) do
                RemoveESP(p)
            end
        end
    end
})

MainTab:CreateButton({
    Name = "Kill All",
    Callback = function()
        KillAll()
    end
})

MainTab:CreateButton({
    Name = "Kill Sheriff",
    Callback = function()
        KillSheriff()
    end
})

MainTab:CreateToggle({
    Name = "–ê–≤—Ç–æ—Ñ–∞—Ä–º —à–∞—Ä–æ–≤",
    CurrentValue = false,
    Callback = function(value)
        AutoFarmEnabled = value
    end
})

local FlingInput = MainTab:CreateTextbox({
    Name = "–ò–≥—Ä–æ–∫ –¥–ª—è —Ñ–ª–∏–Ω–≥–∞ (–≤–≤–µ–¥–∏—Ç–µ –Ω–∏–∫)",
    PlaceholderText = "–ù–∞–ø–∏—à–∏—Ç–µ –Ω–∏–∫...",
    Callback = function(value)
        FlungPlayer = Players:FindFirstChild(value)
        if FlungPlayer then
            print("–§–ª–∏–Ω–≥ –∏–≥—Ä–æ–∫–∞: " .. FlungPlayer.Name)
        else
            print("–ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω")
        end
    end
})

MainTab:CreateButton({
    Name = "–§–ª–∏–Ω–≥ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞",
    Callback = function()
        if FlungPlayer then
            FlingPlayer(FlungPlayer)
        else
            print("–ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –¥–ª—è —Ñ–ª–∏–Ω–≥–∞")
        end
    end
})

MainTab:CreateToggle({
    Name = "Fly",
    CurrentValue = false,
    Callback = function(value)
        FlyEnabled = value
        if value then
            -- –ó–∞–ø—É—Å–∫–∞–µ–º Fly
            local function Fly()
                local chr = LocalPlayer.Character
                local hum = chr and chr:FindFirstChildWhichIsA("Humanoid")
                if not chr or not hum then return end

                local torso = chr:FindFirstChild("UpperTorso") or chr:FindFirstChild("Torso")

                local bg = Instance.new("BodyGyro", torso)
                bg.P = 9e4
                bg.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
                bg.CFrame = torso.CFrame

                local bv = Instance.new("BodyVelocity", torso)
                bv.Velocity = Vector3.new(0, 0, 0)
                bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)

                hum.PlatformStand = true

                RunService:BindToRenderStep("Fly", 301, function()
                    local moveVector = Vector3.new()
                    if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                        moveVector = moveVector + Workspace.CurrentCamera.CFrame.LookVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                        moveVector = moveVector - Workspace.CurrentCamera.CFrame.LookVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                        moveVector = moveVector - Workspace.CurrentCamera.CFrame.RightVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                        moveVector = moveVector + Workspace.CurrentCamera.CFrame.RightVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.E) then
                        moveVector = moveVector + Vector3.new(0, 1, 0)
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.Q) then
                        moveVector = moveVector - Vector3.new(0, 1, 0)
                    end

                    if moveVector.Magnitude > 0 then
                        bv.Velocity = moveVector.Unit * FlySpeed
                        bg.CFrame = Workspace.CurrentCamera.CFrame
                    else
                        bv.Velocity = Vector3.new(0, 0, 0)
                    end
                end)
            end

            Fly()
        else
            RunService:UnbindFromRenderStep("Fly")
            local chr = LocalPlayer.Character
            local hum = chr and chr:FindFirstChildWhichIsA("Humanoid")
            if hum then
                hum.PlatformStand = false
                for _, state in pairs(Enum.HumanoidStateType:GetEnumItems()) do
                    hum:SetStateEnabled(state, true)
                end
            end
            local torso = LocalPlayer.Character and (LocalPlayer.Character:FindFirstChild("UpperTorso") or LocalPlayer.Character:FindFirstChild("Torso"))
            if torso then
                local bg = torso:FindFirstChild("BodyGyro")
                local bv = torso:FindFirstChild("BodyVelocity")
                if bg then bg:Destroy() end
                if bv then bv:Destroy() end
            end
        end
    end
})

MainTab:CreateSlider({
    Name = "Fly Speed",
    Range = {25, 150},
    Increment = 5,
    Suffix = "speed",
    CurrentValue = FlySpeed,
    Callback = function(value)
        FlySpeed = value
    end
})

-- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ESP –∏ –∞–≤—Ço—Ñ–∞—Ä–º–∞
RunService.Heartbeat:Connect(function()
    if ESPEnabled then
        UpdateESP()
    end
    if AutoFarmEnabled then
        AutoFarm()
    end
end)

-- –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä —Ä–∞—É–Ω–¥–∞
StartRoundTimer()

Rayfield:Notify({
    Title = "MM2 Extended Cheat v2.0",
    Content = "–°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!",
    Duration = 4,
})

print("[MM2 Extended Cheat v2.0] —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—â–µ–Ω!")
